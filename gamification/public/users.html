<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>gitBadges!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

	<!--link rel="stylesheet/less" href="less/bootstrap.less" type="text/css" /-->
	<!--link rel="stylesheet/less" href="less/responsive.less" type="text/css" /-->
	<!--script src="js/less-1.3.3.min.js"></script-->
	<!--append ‘#!watch’ to the browser URL, then refresh the page. -->
	
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">

  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
  <![endif]-->

  <!-- Fav and touch icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="img/apple-touch-icon-57-precomposed.png">
  <link rel="shortcut icon" href="img/favicon.png">
  
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/scripts.js"></script>
</head>

<body>
<div class="container"> <!--container-->
	<div class="row clearfix">
		<div class="col-md-12 column">
			<img alt="140x140" src="images/gitBadges.jpg" width=340 height=100>
		</div>
	</div>
	<div class="row clearfix">
		<div class="col-md-12 column">
			<div class="btn-group">
				<a href="/index.html" > About   </a>
				<a href="/users.html" > Users   </a>
				<a href="/badges.html" > Badges   </a>
				<!--<a href="/rank.html" > Rank </a> -->
			</div>
			
		</div>
	</div>
	<div class="row clearfix">
		<div class="col-md-12 column">
			<h1 class="text-primary">
				All Users			
			</h1>
		</div>
	</div>
	<div class="row clearfix">
		<div class="col-md-12 column">
			<table class="table">
				<tbody>
					<tr>
						<td>
							<div class="row clearfix">
								<div class="col-md-2 column">								
									<img id="img0" class="img-circle" src="images/andres.serjoy.png" width=100 height=100>
								</div>
								<div class="col-md-10 column">
									<div class="row clearfix">									
										<h3 id="keyUser0" class="text-primary"></h3>
									</div>
									<div class="row clearfix">									
										<div class="col-md-1 column">
							    				<img id="img00" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img01" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img02" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img03" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
							    				<img id="img04" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img05" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img06" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img07" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img08" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img09" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img010" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img011" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img012" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img013" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img014" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img015" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img016" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img017" class="img-circle" width=70 height=70>
										</div>
									</div>
								</div>
								
							</div>
						</td>
					</tr>
					<tr class="active">						
						<td>
							<div class="row clearfix">
								<div class="col-md-2 column">								
									<img id="img0" class="img-circle" src="images/user3.png" width=100 height=100>
								</div>
								<div class="col-md-10 column">
									<div class="row clearfix">									
										<h3 id="keyUser1" class="text-primary"></h3>
									</div>
									<div class="row clearfix">									
										<div class="col-md-1 column">
							    				<img id="img10" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img11" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img12" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img13" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
							    				<img id="img14" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img15" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img16" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img17" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img18" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img19" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img110" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img111" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img112" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img113" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img114" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img115" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img116" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img117" class="img-circle" width=70 height=70>
										</div>
									</div>
								</div>
								
							</div>
						</td>
					</tr>
					<tr class="success">						
						<td>
							<div class="row clearfix">
								<div class="col-md-2 column">								
									<img id="img2" class="img-circle" src="images/user2.png" width=100 height=100>
								</div>
								<div class="col-md-10 column">
									<div class="row clearfix">									
										<h3 id="keyUser2" class="text-primary"></h3>
									</div>
									<div class="row clearfix">									
										<div class="col-md-1 column">
							    				<img id="img20" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img21" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img22" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img23" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
							    				<img id="img24" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img25" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img26" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img27" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img28" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img29" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img210" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img211" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img212" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img213" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img214" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img215" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img216" class="img-circle" width=70 height=70>
										</div>
										<div class="col-md-1 column">
									    		<img id="img217" class="img-circle" width=70 height=70>
										</div>
									</div>
								</div>
								
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>

<script>

    var badges = [];

    $.getJSON( "/users", function( data ) {
        users = data;

        var usersNames = [];
	
        var i, j, k, l, m;

        for(i = 0; i < users.length; i++){
            usersNames[i] = users[i].user_id;
        }
	
        myFunction(usersNames, badges);

        function myFunction(usersNames, badges){
            for(i = 0; i < usersNames.length; i++){
                keyUser = "keyUser"+i;                      //me ubica en la plantilla de html
                img = "img"+i;
                description = "description"+i;

		var badgesNames = [];
                var user = getUser(usersNames[i], users);   //me devuelve el objeto usuario				

		for(l = 0; l < user.badges.length; l++){
            		badgesNames[l] = user.badges[l].badge_id;
        	}
		badgesNames.sort();
		
                document.getElementById(keyUser).innerHTML = user.fullname;  //completa el nombre de usuario en la plantilla html
                
		for(k=0; k<badgesNames.length; k++){   //for(k=0; k<user.badges.length; k++){			              //por cada badge del usuario
			var badge = getBadge(badgesNames[k],user.badges);
			if(badge.cant_act>=badge.amount_necessary){  //if(user.badges[k].cant_act>=user.badges[k].amount_necessary){		//si el usuario posee el badge..	
				bad="img"+i+k							
				document.getElementById(bad).src = "images/"+badge.image;  //agrega la imagen del badge a la lista de badges del usuario
			}			
		}

            }
        };

        function getUser(key, users){
            for(j = 0; j < users.length; j++){
                if(users[j].user_id==key){
                    return users[j];
                }
            }
        };
	
	function getBadge(key, badges){
            for(m = 0; m < badges.length; m++){
                if(badges[m].badge_id==key){
                    return badges[m];
                }
            }
        };
    });
</script>
</body>
</html>




